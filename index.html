<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Check if App is Installed</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding-top: 50px;
        }
    </style>
</head>
<body>
    <h1>Check if App is Installed</h1>
    <p id="status">Checking...</p>

    <script>
        function checkApp() {
            const statusElement = document.getElementById("status");

            // For iOS devices (Universal Links or Custom URL scheme)
            const iosScheme = "myapp://"; // Replace with your app's custom URL scheme or universal link
            const androidPackage = "com.example.app"; // Replace with your app's package name

            const isIos = /iPhone|iPad|iPod/.test(navigator.userAgent);
            const isAndroid = /Android/.test(navigator.userAgent);

            if (isIos) {
                // Try to open the app using the custom URL scheme or Universal Link
                const startTime = Date.now();

                // Create an invisible iframe to attempt opening the app
                const iframe = document.createElement("iframe");
                iframe.style.display = "none";
                iframe.src = iosScheme;

                document.body.appendChild(iframe);

                // Listen for when the page visibility changes (return to the page after app is opened)
                document.addEventListener("visibilitychange", function () {
                    if (document.visibilityState === 'visible') {
                        const elapsedTime = Date.now() - startTime;
                        if (elapsedTime < 3000) { // App opened, no need to redirect
                            return;
                        }
                        statusElement.textContent = "App is not installed on iOS.";
                        window.location.href = "https://apps.apple.com/app/idYOUR_APP_ID"; // Redirect to App Store
                    }
                });

                setTimeout(function () {
                    // If the app didn't open after a longer timeout, assume it's not installed
                    const elapsedTime = Date.now() - startTime;
                    if (elapsedTime < 3000) {
                        return; // App opened successfully
                    }
                    statusElement.textContent = "App is not installed on iOS.";
                    window.location.href = "https://apps.apple.com/app/idYOUR_APP_ID"; // Redirect to App Store
                }, 3000); // Increase timeout to 3 seconds
            } else if (isAndroid) {
                // Attempt to open the app using an Intent (Android's deep linking method)
                const startTime = Date.now();

                const iframe = document.createElement("iframe");
                iframe.style.display = "none";
                iframe.src = `intent://#Intent;package=${androidPackage};end;`;

                document.body.appendChild(iframe);

                setTimeout(function () {
                    // If the app didn't open after a longer timeout, assume it's not installed
                    const elapsedTime = Date.now() - startTime;
                    if (elapsedTime < 3000) {
                        return; // App opened successfully
                    }
                    statusElement.textContent = "App is not installed on Android.";
                    window.location.href = "https://play.google.com/store/apps/details?id=" + androidPackage; // Redirect to Play Store
                }, 3000); // Increase timeout to 3 seconds
            } else {
                statusElement.textContent = "Unsupported platform.";
            }
        }

        checkApp();
    </script>
</body>
</html>
<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Check if App is Installed</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding-top: 50px;
        }
    </style>
</head>
<body>
    <h1>Check if App is Installed</h1>
    <p id="status">Checking...</p>

    <script>
        function checkApp() {
            const statusElement = document.getElementById("status");

            // For iOS devices (Universal Links or Custom URL scheme)
            const iosScheme = "stcpaybh://"; // Replace with your app's custom URL scheme or universal link
            const androidPackage = "com.viva.cash"; // Replace with your app's package name

            const isIos = /iPhone|iPad|iPod/.test(navigator.userAgent);
            const isAndroid = /Android/.test(navigator.userAgent);

            if (isIos) {
                // Try to open the app using the custom URL scheme or Universal Link
                const startTime = Date.now();

                // Create an invisible iframe to attempt opening the app
                const iframe = document.createElement("iframe");
                iframe.style.display = "none";
                iframe.src = iosScheme;

                document.body.appendChild(iframe);

                setTimeout(function () {
                    // If the app didn't open after a small timeout, assume it's not installed
                    if (Date.now() - startTime < 5000) {
                        statusElement.textContent = "App is not installed on iOS.";
                        window.location.href = "https://apps.apple.com/bh/app/stc-pay-bh/id1336421084"; // Redirect to App Store
                    }
                }, 1500);

            } else if (isAndroid) {
                // Attempt to open the app using an Intent (Android's deep linking method)
                const startTime = Date.now();

                const iframe = document.createElement("iframe");
                iframe.style.display = "none";
                iframe.src = `intent://#Intent;package=${androidPackage};end;`;

                document.body.appendChild(iframe);

                setTimeout(function () {
                    // If the app didn't open after a short timeout, assume it's not installed
                    if (Date.now() - startTime < 2000) {
                        statusElement.textContent = "App is not installed on Android.";
                        window.location.href = "https://play.google.com/store/apps/details?id=com.vivacash.sadad&hl=en"; // Redirect to Play Store
                    }
                }, 1500);
            } else {
                statusElement.textContent = "Unsupported platform.";
            }
        }

        checkApp();
    </script>
</body>
</html> -->
<!--  <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Open App</title>
</head>
<body>
    <a href="stcpaybh://">Open My App</a>
</body>
</html> -->
